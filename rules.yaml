# Substore å…¼å®¹é…ç½®æ–‡ä»¶ï¼ŒåŸºäº Mihomo Party è„šæœ¬æ”¹ç¼–
# å˜æ›´ç‚¹ï¼š
# 1) å»é™¤ä»£ç†ç»„åå‰çš„ç©ºæ ¼å ä½ï¼Œç»Ÿä¸€å‘½å
# 2) åˆ é™¤ï¼šè´Ÿè½½å‡è¡¡(æ•£åˆ—) / è´Ÿè½½å‡è¡¡(è½®è¯¢) / æ•…éšœè½¬ç§» / å›½å¤–åª’ä½“ / Bybit / PikPak / è°·æ­ŒæœåŠ¡ / è‡ªå®šä¹‰ç›´è¿ / è‡ªå®šä¹‰ä»£ç† / Claude
# 3) Claude è§„åˆ™å¹¶å…¥ ChatGPT ç»„ï¼Œå¹¶å°†è¯¥ç»„é‡å‘½åä¸ºã€ŒğŸ’¬ ChatGPT-Claude-XAI-Perplexityã€
# 4) æ–°å¢ç‹¬ç«‹çš„ã€ŒğŸ”® Geminiã€ç»„ï¼Œå¹¶å°† google-gemini è§„åˆ™æŒ‡å‘è¯¥ç»„
# 5) æ‰€æœ‰è¢«åˆ é™¤ç»„çš„è§„åˆ™ç»Ÿä¸€æ”¹æŒ‡å‘ï¼šğŸ”° æ¨¡å¼é€‰æ‹©ï¼ˆä¿æŒä½ çš„â€œåˆ†æµç‹¬ç«‹ã€é“¾å¼ç‹¬ç«‹â€çš„æ€è·¯ï¼‰
# 6) è½åœ°é“¾å¼ä»åœ¨ç»„çº§ç”Ÿæ•ˆï¼šğŸ•Šï¸ è½åœ°èŠ‚ç‚¹ -> dialer-proxy: âš™ï¸ èŠ‚ç‚¹é€‰æ‹©

dns:
  enable: true
  listen: "0.0.0.0:1053"
  prefer-h3: false
  respect-rules: true
  use-system-hosts: false
  cache-algorithm: "arc"
  enhanced-mode: "fake-ip"
  fake-ip-range: "198.18.0.1/16"
  fake-ip-filter:
    - "+.lan"
    - "+.local"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - "localhost.ptlogin2.qq.com"
    - "localhost.sec.qq.com"
    - "localhost.work.weixin.qq.com"
  default-nameserver:
    - "223.5.5.5"
    - "1.2.4.8"
  nameserver:
    - "https://cloudflare-dns.com/dns-query"
    - "https://77.88.8.8/dns-query"
    - "https://8.8.4.4/dns-query#ecs=1.1.1.1/24&ecs-override=true"
    - "https://208.67.222.222/dns-query#ecs=1.1.1.1/24&ecs-override=true"
    - "https://9.9.9.9/dns-query"
  proxy-server-nameserver:
    - "https://223.5.5.5/dns-query"
    - "https://doh.pub/dns-query"
  direct-nameserver:
    - "https://223.5.5.5/dns-query"
    - "https://doh.pub/dns-query"
  direct-nameserver-follow-policy: false
  nameserver-policy:
    "geosite:cn":
      - "https://223.5.5.5/dns-query"
      - "https://doh.pub/dns-query"

rule-providers:
  reject:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
    path: "./ruleset/loyalsoldier/reject.yaml"

  customdirect:
    type: http
    format: yaml
    behavior: domain
    interval: 86400
    url: "https://cdn.jsdelivr.net/gh/wangbaoqiang-lixiaolu/substore@main/custom-direct.yaml"
    path: "./ruleset/custom-direct.yaml"

  customproxy:
    type: http
    format: yaml
    behavior: domain
    interval: 86400
    url: "https://fastly.jsdelivr.net/gh/wangbaoqiang-lixiaolu/substore@main/custom-proxy.yaml"
    path: "./ruleset/custom-proxy.yaml"

  icloud:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt"
    path: "./ruleset/loyalsoldier/icloud.yaml"

  apple:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt"
    path: "./ruleset/loyalsoldier/apple.yaml"

  google:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt"
    path: "./ruleset/loyalsoldier/google.yaml"

  proxy:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
    path: "./ruleset/loyalsoldier/proxy.yaml"

  direct:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt"
    path: "./ruleset/loyalsoldier/direct.yaml"

  private:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
    path: "./ruleset/loyalsoldier/private.yaml"

  gfw:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"
    path: "./ruleset/loyalsoldier/gfw.yaml"

  tld-not-cn:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt"
    path: "./ruleset/loyalsoldier/tld-not-cn.yaml"

  telegramcidr:
    type: http
    format: yaml
    interval: 86400
    behavior: ipcidr
    url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"
    path: "./ruleset/loyalsoldier/telegramcidr.yaml"

  cncidr:
    type: http
    format: yaml
    interval: 86400
    behavior: ipcidr
    url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
    path: "./ruleset/loyalsoldier/cncidr.yaml"

  lancidr:
    type: http
    format: yaml
    interval: 86400
    behavior: ipcidr
    url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
    path: "./ruleset/loyalsoldier/lancidr.yaml"

  applications:
    type: http
    format: yaml
    interval: 86400
    behavior: classical
    url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt"
    path: "./ruleset/loyalsoldier/applications.yaml"

  openai:
    type: http
    format: yaml
    interval: 86400
    behavior: classical
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/classical/openai.yaml"
    path: "./ruleset/MetaCubeX/openai.yaml"

  bybit:
    type: http
    format: yaml
    interval: 86400
    behavior: classical
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/classical/bybit.yaml"
    path: "./ruleset/MetaCubeX/bybit.yaml"

  pikpak:
    type: http
    format: yaml
    interval: 86400
    behavior: classical
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/classical/pikpak.yaml"
    path: "./ruleset/MetaCubeX/pikpak.yaml"

  anthropic:
    type: http
    format: yaml
    interval: 86400
    behavior: classical
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/classical/anthropic.yaml"
    path: "./ruleset/MetaCubeX/anthropic.yaml"

  google-gemini:
    type: http
    format: yaml
    interval: 86400
    behavior: classical
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/classical/google-gemini.yaml"
    path: "./ruleset/MetaCubeX/google-gemini.yaml"

  xai:
    type: http
    format: yaml
    interval: 86400
    behavior: classical
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/classical/xai.yaml"
    path: "./ruleset/MetaCubeX/xai.yaml"

  perplexity:
    type: http
    format: yaml
    interval: 86400
    behavior: classical
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/classical/perplexity.yaml"
    path: "./ruleset/MetaCubeX/perplexity.yaml"

  microsoft:
    type: http
    format: yaml
    interval: 86400
    behavior: classical
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/classical/microsoft.yaml"
    path: "./ruleset/MetaCubeX/microsoft.yaml"

rules:
  # è¿›ç¨‹ä¼˜å…ˆ
  - "PROCESS-NAME,dota2.exe,ğŸ”— å…¨å±€ç›´è¿"
  - "PROCESS-NAME,steam.exe,ğŸ”— å…¨å±€ç›´è¿"

  # è‡ªå®šä¹‰è§„åˆ™ï¼šç›´è¿/ä»£ç†ï¼ˆå¯¹åº” providersï¼‰
  - "RULE-SET,customdirect,ğŸ”— å…¨å±€ç›´è¿"
  - "RULE-SET,customproxy,ğŸ”° æ¨¡å¼é€‰æ‹©"

  # å¸¸è§ç›´è¾¾æ¨¡å¼é€‰æ‹©åŸŸå
  - "DOMAIN-SUFFIX,googleapis.cn,ğŸ”° æ¨¡å¼é€‰æ‹©"
  - "DOMAIN-SUFFIX,gstatic.com,ğŸ”° æ¨¡å¼é€‰æ‹©"
  - "DOMAIN-SUFFIX,xn--ngstr-lra8j.com,ğŸ”° æ¨¡å¼é€‰æ‹©"
  - "DOMAIN-SUFFIX,github.io,ğŸ”° æ¨¡å¼é€‰æ‹©"
  - "DOMAIN,v2rayse.com,ğŸ”° æ¨¡å¼é€‰æ‹©"

  # AI/æœåŠ¡åˆ†æµ
  - "RULE-SET,openai,ğŸ’¬ ChatGPT-Claude-XAI-Perplexity"
  - "RULE-SET,anthropic,ğŸ’¬ ChatGPT-Claude-XAI-Perplexity"     # Claude å¹¶å…¥ ChatGPT ç»„
  - "RULE-SET,xai,ğŸ’¬ ChatGPT-Claude-XAI-Perplexity"
  - "RULE-SET,perplexity,ğŸ’¬ ChatGPT-Claude-XAI-Perplexity"
  - "RULE-SET,google-gemini,ğŸ”® Gemini"                         # Gemini ç‹¬ç«‹

  # å…¶å®ƒæœåŠ¡
  - "RULE-SET,pikpak,ğŸ”° æ¨¡å¼é€‰æ‹©"      # åŸæŒ‡ğŸ…¿ï¸ PikPak â†’ æ”¹èµ°æ¨¡å¼é€‰æ‹©
  - "RULE-SET,bybit,ğŸ”° æ¨¡å¼é€‰æ‹©"       # åŸæŒ‡ğŸª™ Bybit â†’ æ”¹èµ°æ¨¡å¼é€‰æ‹©

  # ç³»ç»Ÿ/ç›´è¿/æ‹¦æˆª
  - "RULE-SET,applications,ğŸ”— å…¨å±€ç›´è¿"
  - "RULE-SET,private,ğŸ”— å…¨å±€ç›´è¿"
  - "RULE-SET,reject,ğŸ¥° å¹¿å‘Šè¿‡æ»¤"
  - "RULE-SET,microsoft,â“‚ï¸ å¾®è½¯æœåŠ¡"
  - "RULE-SET,icloud,ğŸ è‹¹æœæœåŠ¡"
  - "RULE-SET,apple,ğŸ è‹¹æœæœåŠ¡"
  - "RULE-SET,google,ğŸ”° æ¨¡å¼é€‰æ‹©"      # åŸæŒ‡ğŸ“¢ è°·æ­ŒæœåŠ¡ â†’ æ”¹èµ°æ¨¡å¼é€‰æ‹©

  # å¸¸è§„å‡ºå›½æµé‡
  - "RULE-SET,proxy,ğŸ”° æ¨¡å¼é€‰æ‹©"
  - "RULE-SET,gfw,ğŸ”° æ¨¡å¼é€‰æ‹©"
  - "RULE-SET,tld-not-cn,ğŸ”° æ¨¡å¼é€‰æ‹©"

  # ç›´è¿ä¼˜å…ˆ
  - "RULE-SET,direct,ğŸ”— å…¨å±€ç›´è¿"
  - "RULE-SET,lancidr,ğŸ”— å…¨å±€ç›´è¿,no-resolve"
  - "RULE-SET,cncidr,ğŸ”— å…¨å±€ç›´è¿,no-resolve"
  - "RULE-SET,telegramcidr,ğŸ“² ç”µæŠ¥æ¶ˆæ¯,no-resolve"
  - "GEOIP,LAN,ğŸ”— å…¨å±€ç›´è¿,no-resolve"
  - "GEOIP,CN,ğŸ”— å…¨å±€ç›´è¿,no-resolve"

  # å…œåº•
  - "MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼"

proxy-groups:
  # ä½ çš„â€œæ¨¡å¼é€‰æ‹©â€å…¥å£ï¼šä¸€èˆ¬æµé‡è¿›æ¥é¦–é€‰è¿™é‡Œ
  - name: "ğŸ”° æ¨¡å¼é€‰æ‹©"
    type: select
    proxies:
      - "âš™ï¸ èŠ‚ç‚¹é€‰æ‹©"
      - "ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹"
      - "ğŸ”— å…¨å±€ç›´è¿"
    interval: 3600
    timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false

  # ä¸­ç»§/å‰ç½®é€‰æ‹©ï¼šä¸åŒ…å«â€œè½åœ°/å®¶å®½â€ç±»èŠ‚ç‚¹
  - name: "âš™ï¸ èŠ‚ç‚¹é€‰æ‹©"
    type: select
    proxies:
      - "â™»ï¸ å»¶è¿Ÿé€‰ä¼˜"
    include-all: true
    exclude-filter: "(?i)è½åœ°|å®¶å®½"
    interval: 3600
    timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io/main/docs/assets/icons/adjust.svg"


  # è½åœ°/å®¶å®½ï¼šç»„çº§é“¾å¼åˆ°â€œâš™ï¸ èŠ‚ç‚¹é€‰æ‹©â€
  - name: "ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹"
    type: select
    include-all: true
    filter: "(?i)è½åœ°|å®¶å®½"
    dialer-proxy: "âš™ï¸ èŠ‚ç‚¹é€‰æ‹©"
    interval: 3600
    timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io/main/docs/assets/icons/openwrt.svg"

  # éå¸¸è½»é‡çš„â€œè‡ªåŠ¨ä¼˜é€‰â€ï¼šä¸å«è½åœ°/å®¶å®½
  - name: "â™»ï¸ å»¶è¿Ÿé€‰ä¼˜"
    type: url-test
    tolerance: 50
    include-all: true
    exclude-filter: "(?i)è½åœ°|å®¶å®½"
    interval: 3600
    timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io/main/docs/assets/icons/speed.svg"

  # AI ç»„ï¼ˆå« OpenAI / Claude / XAI / Perplexityï¼‰
  - name: "ğŸ’¬ ChatGPT-Claude-XAI-Perplexity"
    type: select
    proxies:
      - "ğŸ”° æ¨¡å¼é€‰æ‹©"
      - "âš™ï¸ èŠ‚ç‚¹é€‰æ‹©"
      - "ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹"
      - "ğŸ”— å…¨å±€ç›´è¿"
      - "â™»ï¸ å»¶è¿Ÿé€‰ä¼˜"
    include-all: true
    # ä»ä¿ç•™åœ°ç†æ’é™¤ï¼Œé¿å…åŒºåŸŸä¸æ”¯æŒ
    exclude-filter: "(?i)æ¸¯|hk|hongkong|hong kong|ä¿„|ru|russia|æ¾³|macao"
    interval: 3600
    timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io/main/docs/assets/icons/chatgpt.svg"

  # ç‹¬ç«‹çš„ Gemini ç»„
  - name: "ğŸ”® Gemini"
    type: select
    proxies:
      - "ğŸ”° æ¨¡å¼é€‰æ‹©"
      - "âš™ï¸ èŠ‚ç‚¹é€‰æ‹©"
      - "ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹"
      - "ğŸ”— å…¨å±€ç›´è¿"
      - "â™»ï¸ å»¶è¿Ÿé€‰ä¼˜"
    include-all: true
    # å¯æŒ‰éœ€ä¿ç•™ç›¸åŒçš„åŒºåŸŸæ’é™¤
    exclude-filter: "(?i)æ¸¯|hk|hongkong|hong kong|ä¿„|ru|russia|æ¾³|macao"
    interval: 3600
    timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io/main/docs/assets/icons/google.svg"

  # Telegramã€Appleã€Microsoftã€å¹¿å‘Šè¿‡æ»¤ã€ç›´è¿/æ‹¦æˆªã€å…œåº•
  - name: "ğŸ“² ç”µæŠ¥æ¶ˆæ¯"
    type: select
    proxies:
      - "ğŸ”° æ¨¡å¼é€‰æ‹©"
      - "âš™ï¸ èŠ‚ç‚¹é€‰æ‹©"
      - "ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹"
      - "ğŸ”— å…¨å±€ç›´è¿"
      - "â™»ï¸ å»¶è¿Ÿé€‰ä¼˜"
    include-all: true
    interval: 3600
    timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io/main/docs/assets/icons/telegram.svg"

  - name: "ğŸ è‹¹æœæœåŠ¡"
    type: select
    proxies:
      - "ğŸ”° æ¨¡å¼é€‰æ‹©"
      - "âš™ï¸ èŠ‚ç‚¹é€‰æ‹©"
      - "ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹"
      - "ğŸ”— å…¨å±€ç›´è¿"
      - "â™»ï¸ å»¶è¿Ÿé€‰ä¼˜"
    include-all: true
    interval: 3600
    timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io/main/docs/assets/icons/apple.svg"

  - name: "â“‚ï¸ å¾®è½¯æœåŠ¡"
    type: select
    proxies:
      - "ğŸ”° æ¨¡å¼é€‰æ‹©"
      - "âš™ï¸ èŠ‚ç‚¹é€‰æ‹©"
      - "ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹"
      - "ğŸ”— å…¨å±€ç›´è¿"
      - "â™»ï¸ å»¶è¿Ÿé€‰ä¼˜"
    include-all: true
    interval: 3600
    timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io/main/docs/assets/icons/microsoft.svg"

  - name: "ğŸ¥° å¹¿å‘Šè¿‡æ»¤"
    type: select
    proxies:
      - "REJECT"
      - "DIRECT"
    interval: 3600
    timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io/main/docs/assets/icons/bug.svg"

  - name: "ğŸ”— å…¨å±€ç›´è¿"
    type: select
    proxies:
      - "DIRECT"
    interval: 3600
    timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io/main/docs/assets/icons/link.svg"

  - name: "âŒ å…¨å±€æ‹¦æˆª"
    type: select
    proxies:
      - "REJECT"
      - "DIRECT"
    interval: 3600
    timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io/main/docs/assets/icons/block.svg"

  - name: "ğŸŸ æ¼ç½‘ä¹‹é±¼"
    type: select
    proxies:
      - "ğŸ”° æ¨¡å¼é€‰æ‹©"
      - "âš™ï¸ èŠ‚ç‚¹é€‰æ‹©"
      - "ğŸ•Šï¸ è½åœ°èŠ‚ç‚¹"
      - "ğŸ”— å…¨å±€ç›´è¿"
      - "â™»ï¸ å»¶è¿Ÿé€‰ä¼˜"
    include-all: true
    interval: 3600
    timeout: 3000
    url: "https://www.google.com/generate_204"
    lazy: true
    max-failed-times: 3
    hidden: false
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io/main/docs/assets/icons/fish.svg"

global-ua: "clash-verge/v2.2.0"
